
@import "./styles/tokens.css";

:root{
  /* iOS safe areas */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  /* Background motion defaults (themes may override) */
  --background-size: 140% 140%;
  --background-position: 50% 50%;

  /* Premium token aliases + safe fallbacks (themeTokens.js exports surface2/surface3/borderStrong/textStrong/...) */
  --surface-2: var(--surface2);
  --surface-3: var(--surface3);
  --border-strong: var(--borderStrong);
  --text-strong: var(--textStrong);
  --shadow-soft: var(--shadowSoft);
  --shadow-card: var(--shadowCard);

  /* Z-index scale */
  --z-base: 0;
  --z-sticky: 40;
  --z-dropdown: 60;
  --z-modal: 80;
  --z-toast: 1200;
}

*{ box-sizing:border-box; }
html,body{
  min-height:100dvh;
  height:100%;
  width:100%;
  overflow-x:hidden;
  background: var(--bg-base, var(--background, var(--bg, #05060A)));
}
body{
  margin:0;
  background: var(--bg-base, var(--background, var(--bg, #05060A)));
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  overflow-x:hidden;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
#root{
  width:100%;
  min-height:100dvh;
  height:100%;
  overflow-x:hidden;
}

a{ color:inherit; }

.container{
  max-width:var(--page-max);
  margin:0 auto;
  padding:calc(var(--navOffset, 0px) + var(--navGap, 10px) + var(--page-top-gap)) 16px 32px;
  min-height:100dvh;
  overflow:visible;
  padding-bottom:calc(32px + var(--bottomRailOffset, 120px) + var(--safe-bottom));
  overflow-x:hidden;
}
.pageContent{
  margin-top: var(--subtitleToContent);
}
.pageContent > :first-child{
  margin-top: 0;
}

/* === PAGE LAYOUT SYSTEM === */
.pageHeader{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:var(--space-12);
}
.pageHeaderRowStart{ align-items:flex-start; }
.pageHeaderRowEnd{ align-items:flex-end; }
.pageHeaderLeft{
  min-width:0;
  flex:1 1 auto;
}
.pageHeaderRight{
  flex:0 1 auto;
  min-width:0;
  max-width:260px;
  overflow:hidden;
}
.pageHeaderAlignLeft{ text-align:left; }
.pageHeaderAlignCenter{ text-align:center; }
.pageHeaderAlignRight{ text-align:right; }
.pageTitle{
  margin:0;
  margin-top:var(--pageTitleMarginTop);
  font-size:var(--font-title);
  font-weight:var(--font-weight-bold);
  letter-spacing:-.02em;
}
.pageSubtitle{
  margin:0;
  margin-top:var(--pageTitleToSubtitle);
  font-size:var(--font-sm);
  color:var(--text-2, var(--muted));
}
.pageSection{
  margin-top:var(--page-section-gap);
}
.pageSectionTitle{
  margin-bottom:var(--space-8);
}
.stack{
  display:flex;
  flex-direction:column;
}
.stackGap12{ gap:var(--cardGap); }
.stackGap16{ gap:var(--space-16); }
.cardSectionTitleRow{
  display:flex;
  align-items:center;
  gap:var(--space-8);
}
.cardSectionTitle{
  font-size:var(--font-sm);
  font-weight:600;
  letter-spacing:-.01em;
  color:var(--text-2, var(--muted));
  opacity:1;
}
.liquidSelect .select{
  background: var(--liquidSelectBg, var(--controlBg));
  border-color: var(--liquidSelectBorder, var(--controlBorderStrong));
  box-shadow: var(--liquidSelectShadow, var(--shadowControl));
}
.liquidSelect .select:focus{
  border-color: var(--controlBorderFocus, var(--accent));
  box-shadow: var(--controlFocusRing, 0 0 0 1px var(--accent));
}
.noteMetaGrid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:10px;
}
.noteActions{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  gap:8px;
}
@media (max-width: 420px){
  .noteMetaGrid{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.bg{
  position:fixed;
  inset:0;
  z-index:-2;
  background: var(--bg-base, var(--background));
  background-size: var(--background-size);
  background-position: var(--background-position);
  overflow:hidden;
  will-change: background-position, transform;
  animation: none;
}

/* premium depth + subtle texture (no images) */
.bg::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: var(--bg-vignette, var(--backgroundVignette, none));
  opacity: var(--bg-vignette-opacity, var(--backgroundVignetteOpacity, 0));
}

.bg::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity: var(--bg-noise-opacity, var(--backgroundGrainOpacity, 0));
  background: var(--bg-noise, var(--backgroundGrain, none)), var(--bg-stripes, none);
  mix-blend-mode: var(--bg-noise-blend, var(--backgroundGrainBlend, soft-light));
}


@media (prefers-reduced-motion: reduce){
  .bg{ animation:none; }
}

@supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
  .navWrap,
  .card,
  .drawerPanel,
  .plusExpanderPanel,
  .selectMenu{
    backdrop-filter: blur(var(--cardBlur, 16px));
    -webkit-backdrop-filter: blur(var(--cardBlur, 16px));
  }

  .input, .textarea, .select,
  .controlClip,
  .selectTrigger,
  .liquidSelect .select,
  .categoryRailAdd{
    backdrop-filter: blur(var(--controlBlur, 10px));
    -webkit-backdrop-filter: blur(var(--controlBlur, 10px));
  }

  .reminderOverlay,
  .disciplineOverlay{
    backdrop-filter: blur(var(--overlayBlur, 6px));
    -webkit-backdrop-filter: blur(var(--overlayBlur, 6px));
  }

  .editPanelFooter{
    backdrop-filter: blur(var(--panelFooterBlur, 10px));
    -webkit-backdrop-filter: blur(var(--panelFooterBlur, 10px));
  }
}

.bgImg{
  position:fixed; inset:0; z-index:-1;
  background-size:cover;
  background-position:center;
  opacity:.22;
  filter:saturate(1.1) contrast(1.05);
  pointer-events:none;
}

.navTop{
  width:100%;
  padding:14px 16px 0;
}
.stickyStack{
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-sticky);
  padding-top: var(--safe-top);
}
.navWrap{
  max-width:var(--page-max);
  margin:0 auto;
  border:1px solid var(--border-subtle, var(--border));
  background: linear-gradient(180deg, var(--surface-2, var(--glass2)), var(--surface-1, var(--glass)));
  border-radius:var(--radius-card);
  padding:8px;
  box-shadow: var(--navShadow, var(--shadow));
}
.navRailWrap{
  max-width:var(--page-max);
  width:calc(100% - 28px);
  margin:4px auto 0;
  background: transparent;
}
.categoryRailRow{
  display:flex;
  align-items:center;
  gap:10px;
}
.categoryRailScroll{
  display:flex;
  gap:8px;
  overflow-x:auto;
  padding-bottom:4px;
  flex:1;
  scroll-behavior:smooth;
  scroll-snap-type:x mandatory;
}
.categoryRailItem{
  min-width:max-content;
  white-space:nowrap;
  display:flex;
  align-items:center;
  gap:8px;
  scroll-snap-align:center;
}
.categoryRailItem .itemTitle{
  color: inherit;
}
.categoryRailAdd{
  border:0;
  background: var(--railAddBg, rgba(255,255,255,.04));
  color: var(--text);
  width:36px;
  height:36px;
  border-radius:var(--radius-12);
  display:grid;
  place-items:center;
  cursor:pointer;
  flex-shrink:0;
  border:1px solid var(--border-subtle, var(--border));
}
.categoryRailAdd:hover{
  background: var(--glass2);
}
.categoryRailAdd.isOpen{
  transform: scale(1.08);
  box-shadow: var(--railAddShadow, 0 10px 24px rgba(0,0,0,.25));
}
.navRow{
  display:flex;
  align-items:center;
  gap:6px;
}
.navActions{
  display:flex;
  align-items:center;
  gap:6px;
}
.navGrid{
  flex:1;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:6px;
}
.navBtn{
  border:1px solid var(--navBtnBorder, rgba(255,255,255,.12));
  background:transparent;
  color:var(--navBtnText, rgba(255,255,255,.7));
  padding:10px 8px;
  border-radius:var(--radius-16);
  font-size:var(--font-xs);
  line-height:1;
  cursor:pointer;
}
.navBtn:hover{ background: var(--navBtnHoverBg, rgba(255,255,255,.08)); }
.navBtnActive{
  background: var(--navBtnActiveBg, rgba(255,255,255,.92));
  color:var(--navBtnActiveText, var(--textOnLight, #000));
  box-shadow: var(--navBtnActiveShadow, 0 10px 30px rgba(0,0,0,.20));
}
.navGear{
  border:0;
  background: var(--navGearBg, rgba(255,255,255,.10));
  color:var(--navGearText, rgba(255,255,255,.85));
  width:34px;
  height:34px;
  border-radius:var(--radius-12);
  cursor:pointer;
  font-size:16px;
  display:grid;
  place-items:center;
}
.navGear:hover{ background: var(--navGearHoverBg, rgba(255,255,255,.18)); }
.navGearActive{
  background: var(--navGearActiveBg, rgba(255,255,255,.92));
  color:var(--navGearActiveText, var(--textOnLight, #000));
  box-shadow: var(--navGearActiveShadow, 0 10px 30px rgba(0,0,0,.20));
}

.bottomBar{
  position: fixed;
  left: 50%;
  bottom: calc(16px + var(--safe-bottom));
  transform: translateX(-50%);
  z-index: var(--z-sticky);
  width: min(var(--page-max), calc(100% - 32px));
  pointer-events: auto;
}

.btnBackCompact{
  padding:8px 12px;
  font-size:13px;
}
.backBtn{
  align-self:flex-start;
  display:inline-flex;
  align-items:center;
}

.hdrRow{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
.hdrLeft{ flex:1 1 auto; min-width:0; }
.hdrRight{ flex:0 1 auto; min-width:0; max-width:260px; overflow:hidden; }
.hdrSub{
  font-size:13px;
  color:var(--text-3, var(--textSubtle, rgba(255,255,255,.60)));
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  margin-top:var(--pageTitleToSubtitle);
}
.hdrTitle{
  margin-top:var(--pageTitleMarginTop);
  font-size:var(--font-title);
  font-weight:700;
  letter-spacing:-.02em;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.textAccent{ color:var(--accent); }

.sectionTitle{
  font-size:var(--font-sm);
  font-weight:600;
  letter-spacing:-.01em;
  color:var(--text-2, var(--muted));
  opacity:1;
}
.sectionSub{ font-size:var(--font-sm); color:var(--text-3, var(--muted2)); }
.itemTitle{ font-size:var(--font-md); font-weight:700; color:var(--text-1, var(--text)); }
.itemSub{ font-size:var(--font-sm); color:var(--text-2, var(--muted)); }

.manageHeader{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:16px;
}
.manageHeaderLeft{ min-width:0; }
.manageHeaderTitle{ font-size:var(--font-title); font-weight:700; letter-spacing:-.02em; }
.manageHeaderSubtitle{ font-size:13px; color:var(--text-3, var(--textSubtle, rgba(255,255,255,.60))); margin-top:4px; }
.manageHeaderRight{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:6px;
  min-width:260px;
}
.manageGaugeRow{
  display:grid;
  grid-template-columns: 1fr auto auto;
  align-items:center;
  column-gap:10px;
  width:100%;
}
.manageGauge{
  width:320px;
  max-width:100%;
  grid-column: 1 / span 2;
}
.manageGaugeChevron{
  grid-column:3;
  align-self:flex-start;
}
.manageHeaderRightWrap{
  width:100%;
  max-width:100%;
  min-width:0;
  overflow:hidden;
}
@media (max-width: 720px){
  .manageHeader{ flex-direction:column; }
  .manageHeaderRight{ align-items:flex-start; min-width:0; width:100%; }
  .manageGauge{ width:100%; }
  .manageGaugeRow{ grid-template-columns: 1fr auto auto; }
}

.gaugeWrap{
  width:100%;
  max-width:100%;
  min-width:0;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.gaugeTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  width:100%;
  min-width:0;
}
.gaugeTitle{
  flex:1;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.gaugeValue{
  flex:0 0 auto;
  white-space:nowrap;
  opacity:.85;
}
.gaugeBarRow{
  width:100%;
  max-width:100%;
}

.card{
  border:1px solid var(--border-subtle, var(--cardBorder, var(--border)));
  background: linear-gradient(180deg, var(--surface-2, var(--surface)), var(--surface-1, var(--surface)));
  border-radius:var(--cardRadius, var(--radius-card));
  box-shadow: var(--shadow-md, var(--cardShadow, var(--shadow-card)));
}
.accentSurface{
  position:relative;
  border-color: var(--border-subtle, var(--border));
  background:
    linear-gradient(90deg, var(--accent-soft, var(--accentTint, rgba(255,255,255,.08))), rgba(0,0,0,0) 60%),
    var(--surface-1, var(--surface));
}
.accentRail{
  position:relative;
  --accentRailWidth: 3px;
  --accentRailInset: 12px;
  --accentRailRadius: 4px;
}
.accentRail::before{
  content:"";
  position:absolute;
  left:0;
  top:var(--accentRailInset);
  bottom:var(--accentRailInset);
  width:var(--accentRailWidth);
  border-radius:var(--accentRailRadius);
  background: var(--accent, rgba(255,255,255,.6));
}
.accentItem{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  border-radius:12px;
  transition: background 180ms ease, border-left-color 180ms ease;
  outline:none;
}

.p16{ padding:var(--space-16); }
.p18{ padding:var(--space-18); }
.mt10{ margin-top:10px; }
.mt12{ margin-top:12px; }
.mt14{ margin-top:14px; }
.mt16{ margin-top:16px; }
.mt18{ margin-top:18px; }
.mt6{ margin-top:var(--space-6); }
.mt8{ margin-top:var(--space-8); }
.mt4{ margin-top:var(--space-4); }
.gap4{ gap:var(--space-4); }
.gap6{ gap:var(--space-6); }
.gap8{ gap:var(--space-8); }
.gap10{ gap:var(--space-10); }
.gap12{ gap:var(--space-12); }
.gap16{ gap:var(--space-16); }
.gap20{ gap:var(--space-20); }
.gap24{ gap:var(--space-24); }
.rowWrap{ flex-wrap:wrap; }
.rowEnd{ justify-content:flex-end; }
.rowCenter{ justify-content:center; }
.rowBetween{ justify-content:space-between; }
.rowStart{ justify-content:flex-start; }
.alignStart{ align-items:flex-start; }
.alignCenter{ align-items:center; }
.textMuted{ color:var(--text-2, var(--muted)); }
.textMuted2{ color:var(--text-3, var(--muted2)); }
.textCenter{ text-align:center; }
.textRight{ text-align:right; }
.flex1{ flex:1; }
.wrap{ flex-wrap:wrap; }
.pageNarrow{
  max-width:720px;
  margin:0 auto;
}
.panelNarrow{
  min-width:0;
  max-width:320px;
  width:100%;
}
.wFull{ width:100%; }
.minW0{ min-width:0; }
.minW36{ min-width:36px; }
.ml8{ margin-left:var(--space-8); }
.alignEnd{ align-items:flex-end; }
.pl10{ padding-left:10px; }
.pl12{ padding-left:12px; }
.colorPickerRow{
  align-items:center;
  justify-content:space-between;
  gap:var(--space-10);
  background: var(--glass2);
  border:1px solid var(--border);
  border-radius:var(--radius-12);
  padding:var(--space-10);
  position:relative;
}
.colorPickerSwatch{
  width:28px;
  height:28px;
  border-radius:var(--radius-8);
  border:1px solid var(--border);
}
.colorPickerButton{
  position:relative;
  display:inline-flex;
}
.overlayInput{
  position:absolute;
  inset:0;
  opacity:0;
  cursor:pointer;
}

.row{ display:flex; align-items:center; justify-content:space-between; gap:var(--space-12); }
.row > *{ min-width:0; }
.col{ display:flex; flex-direction:column; gap:var(--space-8); }
.small{ font-size:var(--font-sm); color:var(--text-2, var(--muted)); }
.small2{ font-size:var(--font-sm); color:var(--text-3, var(--muted2)); }
.titleSm{ font-size:var(--font-md); font-weight:var(--font-weight-bold); }

.badge{
  display:inline-flex;
  align-items:center;
  padding:3px 8px;
  font-size:var(--font-xs);
  border-radius:var(--radius-pill);
  border:1px solid var(--badgeBorder, var(--border));
  background: var(--badgeBg, var(--surface));
  color: var(--badgeText, var(--text-strong));
}
.badgeAccent{
  border-color: var(--accent);
  color: var(--accent);
}

.btn{
  border:1px solid var(--buttonBorder, var(--cta));
  background: var(--buttonBg, var(--cta));
  color:var(--buttonText, var(--ctaText));
  border-radius:var(--buttonRadius, var(--radius-btn));
  padding:0 var(--space-14);
  height:var(--buttonHeight, var(--btn-height));
  cursor:pointer;
  font-size:var(--font-md);
  font-weight:var(--font-weight-semibold);
  box-shadow: var(--buttonShadow, var(--shadow-sm, none));
}
.btn:hover{ filter: var(--buttonHoverFilter, brightness(.98)); }
.btn:active{ filter: var(--buttonActiveFilter, brightness(.96)); }
.btn:focus-visible{
  outline:none;
  box-shadow: var(--accent-ring, var(--focusRing, 0 0 0 2px var(--focus)));
}
.btnGhost{
  background: var(--buttonGhostBg, transparent);
  color:var(--buttonGhostText, var(--text));
  border-color: var(--buttonGhostBorder, var(--border));
}
.btnSecondary{
  background: var(--buttonSecondaryBg, transparent);
  color:var(--buttonSecondaryText, var(--text));
  border-color: var(--buttonSecondaryBorder, var(--border-strong));
}
.btnDanger{
  background: var(--buttonDangerBg, rgba(239,68,68,.90));
  color: var(--buttonDangerText, #fff);
  border-color: var(--buttonDangerBorder, rgba(239,68,68,.55));
}
.btn:disabled{ opacity: var(--buttonDisabledOpacity, .55); cursor:not-allowed; }

.iconBtn{
  border:1px solid var(--iconBtnBorder, var(--border));
  background: var(--iconBtnBg, var(--surface));
  color:var(--iconBtnText, rgba(255,255,255,.85));
  width:34px;
  height:34px;
  border-radius:var(--radius-12);
  display:grid;
  place-items:center;
  cursor:pointer;
  font-size:14px;
  line-height:1;
  box-shadow: var(--shadowControl, none);
}
.iconBtn:hover{ background: var(--iconBtnHoverBg, var(--glass2)); }
.iconBtn:focus-visible{
  outline:none;
  box-shadow: var(--accent-ring, var(--focusRing, 0 0 0 2px var(--focus)));
}
.iconBtnDanger{
  border-color: var(--buttonDangerBorder, rgba(239,68,68,.55));
  color: var(--buttonDangerBg, rgba(239,68,68,.95));
}

.input, .textarea, .select{
  width:100%;
  border:1px solid var(--controlBorder, var(--border-subtle, var(--border)));
  background: var(--controlBg, var(--surface-1, var(--surface)));
  color:var(--controlText, var(--text-1, var(--text)));
  border-radius:var(--controlRadius, var(--radius-input));
  padding:0 var(--space-14);
  height:var(--controlHeight, var(--input-height));
  outline:none;
  font-size:var(--font-lg);
  min-width:0;
  max-width:100%;
  box-shadow: var(--shadowControl, none);
}
.input[type="date"],
.input[type="time"]{
  min-width:0;
  max-width:100%;
}
.input:focus, .textarea:focus, .select:focus{
  border-color: var(--controlBorderFocus, var(--focus));
  box-shadow: var(--controlFocusRing, 0 0 0 1px var(--focus));
}
.input::placeholder, .textarea::placeholder{
  color: var(--controlPlaceholder, var(--text-3, var(--muted2)));
}
.textarea{ resize:none; min-height:120px; height:auto; padding:var(--space-12) var(--space-14); }

/* --- iOS overflow/clipping fix for native date/time inputs (wrapper added in UI.jsx) --- */
.controlClip{
  width:100%;
  max-width:100%;
  min-width:0;
  border:1px solid var(--controlBorder, var(--border-subtle, var(--border)));
  background: var(--controlBg, var(--surface-1, var(--surface)));
  border-radius: var(--controlRadius, var(--radius-input));
  overflow:hidden;
  box-shadow: var(--shadowControl, none);
}
.controlClip:focus-within{
  border-color: var(--controlBorderFocus, var(--focus));
  box-shadow: var(--controlFocusRing, 0 0 0 1px var(--focus));
}
.controlClip > .input,
.controlClip > .select,
.controlClip > .textarea{
  width:100%;
  max-width:100%;
  min-width:0;
  border:0;
  background: transparent;
  box-shadow:none;
  border-radius: inherit;
}
.controlClip > .textarea{
  resize:none;
}
/* iOS/Safari: normalize native controls so they respect sizing */
.controlClip .input[type="date"],
.controlClip .input[type="time"],
.controlClip .input[type="datetime-local"]{
  -webkit-appearance: none;
  appearance: none;
}

.scrollTarget{ scroll-margin-top:120px; }

.flashPulse{
  animation: none;
  box-shadow: var(--accent-ring, var(--focusRing, 0 0 0 2px var(--focus)));
}
.flashPulseBtn{
  animation: none;
}

.focusHalo{
  position:relative;
  border-radius:18px;
}
.focusHalo::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:inherit;
  opacity:0;
  pointer-events:none;
  z-index:0;
  box-shadow: 0 0 0 1px var(--catColor, var(--accent)), 0 0 22px var(--catColor, var(--accent));
  transition: opacity .2s ease;
}
.focusHalo > *{
  position:relative;
  z-index:1;
}
.focusHalo:focus-within::after{
  opacity:.65;
  animation: none;
}

.hr{
  height:1px;
  background: var(--divider, rgba(255,255,255,.10));
  margin:12px 0;
}
.progressTrack{
  width:100%;
  height:10px;
  border-radius:999px;
  background: var(--progressTrackBg, rgba(255,255,255,.12));
  overflow:hidden;
}
.progressFill{
  height:100%;
  background: var(--progressFillBg, rgba(255,255,255,.9));
  border-radius:999px;
}

.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
@media (max-width: 420px){
  .grid2{ grid-template-columns:1fr; }
  .input[type="date"], .input[type="time"]{
    font-size:var(--font-md);
    padding:0 var(--space-12);
  }
}
.grid3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; }

.kpi{
  border:1px solid var(--border-subtle, var(--kpiBorder, rgba(255,255,255,.16)));
  background: var(--kpiBg, var(--surface-1, rgba(0,0,0,.25)));
  border-radius:18px;
  padding:14px;
}

.dot{
  width:10px; height:10px; border-radius:999px;
}

.listItem{
  border:1px solid var(--border-subtle, var(--border));
  background: var(--surface-1, var(--surface));
  border-radius:var(--radius-card);
  padding:var(--space-14);
}

.chip{
  border:1px solid var(--border-subtle, var(--border));
  background: var(--chipBg, rgba(255,255,255,.06));
  border-radius:var(--radius-chip);
  padding:8px 12px;
  font-size:var(--font-sm);
  color:var(--text-1, var(--text));
  cursor:pointer;
  line-height:1;
  display:inline-flex;
  align-items:center;
  gap:8px;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.chip:hover{
  background: var(--chipHoverBg, rgba(255,255,255,.09));
}
.chip:focus-visible{
  outline:none;
  box-shadow: var(--accent-ring, var(--focusRing, 0 0 0 2px var(--focus)));
}
.chip:disabled{
  opacity:.5;
  cursor:not-allowed;
}
.chip.isSelected,
.chip.isActive{
  border-color: var(--accentBorder, var(--focus));
  background: var(--accent-soft, var(--accentTintStrong, rgba(124,58,237,.14)));
  color: var(--text-1, var(--text));
  box-shadow: var(--accent-ring, var(--controlFocusRing, 0 0 0 1px var(--focus)));
}

.chipRow{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.hint{
  border:1px solid var(--hintBorder, rgba(255,255,255,.12));
  background: var(--hintBg, rgba(255,255,255,.05));
  border-radius:14px;
  padding:10px 12px;
  font-size:12px;
  color: var(--text-2, var(--muted));
  line-height:1.35;
}
.hintAccent{
  border-color: var(--accentBorder, rgba(124,58,237,.35));
  background: var(--accentTintSoft, rgba(124,58,237,.10));
  color: var(--hintAccentText, rgba(255,255,255,.88));
}
.hintDanger{
  border-color: var(--dangerBorder, rgba(239,68,68,.35));
  background: var(--dangerTint, rgba(239,68,68,.10));
  color: var(--hintDangerText, rgba(255,255,255,.90));
}

.checkRow{
  display:flex;
  align-items:flex-start;
  gap:10px;
  padding:10px 10px;
  border:1px solid var(--checkRowBorder, rgba(255,255,255,.12));
  background: var(--checkRowBg, rgba(255,255,255,.04));
  border-radius:14px;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}
.checkRow:hover{
  background: var(--checkRowHoverBg, rgba(255,255,255,.06));
}
.checkRow.isDisabled{
  opacity:.55;
  cursor:not-allowed;
}
.checkRow input{
  margin-top:2px;
  width:16px;
  height:16px;
  accent-color: var(--accent);
  flex:0 0 auto;
}
.checkRowText{
  display:flex;
  flex-direction:column;
  gap:4px;
  min-width:0;
}
.checkRowLabel{
  font-size:13px;
  font-weight:700;
  color: var(--text);
}
.checkRowDesc{
  font-size:12px;
  color: var(--text-3, var(--muted2));
  line-height:1.35;
}

.divider{
  height:1px;
  width:100%;
  background: var(--divider, rgba(255,255,255,.10));
}



.hideScrollbar{
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.hideScrollbar::-webkit-scrollbar{
  display: none;
}

.scrollNoBar{
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollNoBar::-webkit-scrollbar{
  display: none;
  height: 0;
}

@media (max-width: 420px){
  .hdrRight{ max-width:45vw; }
}

.dragHandle{
  border:0;
  background: var(--dragHandleBg, rgba(255,255,255,.06));
  color: var(--dragHandleText, rgba(255,255,255,.75));
  border-radius:12px;
  padding:6px 8px;
  cursor:grab;
}
.dragHandle:active{ cursor:grabbing; }
.linkBtn{
  border:0;
  background:transparent;
  color:var(--linkBtnText, rgba(255,255,255,.85));
  text-decoration:underline;
  text-underline-offset:4px;
  cursor:pointer;
  padding:0;
  font-size:var(--font-sm);
}
.microToggle{
  text-decoration:none;
  width:18px;
  height:18px;
  display:inline-grid;
  place-items:center;
  line-height:1;
}
.statButton{
  width:100%;
  border:0;
  background:transparent;
  text-align:right;
  padding:0;
  cursor:pointer;
}
.statButton:focus-visible{
  outline:none;
  box-shadow: var(--accent-ring, var(--focusRing, 0 0 0 2px var(--focus)));
  border-radius:10px;
}
.includeToggle{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:12px;
  color:var(--text);
}
.includeToggle input{
  width:16px;
  height:16px;
  accent-color: var(--accent);
}
.sessionCheck{
  appearance: none;
  border: 1px solid var(--sessionCheckBorder, rgba(255,255,255,.35));
  background: var(--sessionCheckBg, rgba(255,255,255,.08));
  border-radius: 4px;
  display: inline-grid;
  place-items: center;
}
.sessionCheck:checked{
  background: var(--accent);
  border-color: var(--accent);
}
.sessionCheck:checked::after{
  content:"";
  width:8px;
  height:4px;
  border:2px solid var(--sessionCheckMark, #111);
  border-top:none;
  border-right:none;
  transform: rotate(-45deg);
}

.modalBackdrop{
  position:fixed;
  inset:0;
  z-index:var(--z-modal);
  background: var(--overlayBackdrop, rgba(0,0,0,.55));
  display:flex;
  align-items:center;
  justify-content:center;
  padding:calc(16px + var(--safe-top)) 16px calc(16px + var(--safe-bottom));
}
.modalPanel{
  width:min(520px, 100%);
  max-height:calc(100dvh - var(--safe-top) - var(--safe-bottom) - 24px);
  overflow:auto;
}
.selectMenuWrap{
  position:relative;
}
.selectTrigger{
  width:100%;
  border:1px solid var(--controlBorder, var(--border-subtle, var(--border)));
  background: var(--controlBg, var(--surface-1, var(--surface)));
  color:var(--controlText, var(--text-1, var(--text)));
  border-radius:var(--controlRadius, var(--radius-input));
  padding:0 var(--space-14);
  height:var(--controlHeight, var(--input-height));
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-10);
  cursor:pointer;
  font-size:var(--font-lg);
  box-shadow: var(--shadowControl, none);
}
.selectTrigger:disabled{
  opacity: var(--controlDisabledOpacity, .6);
  cursor:not-allowed;
}
.selectTrigger:focus-visible{
  outline:none;
  box-shadow: var(--accent-ring, var(--controlFocusRing, 0 0 0 1px var(--focus)));
}
.selectTriggerValue{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.selectTriggerValue.isPlaceholder{
  color:var(--controlPlaceholder, var(--muted2));
}
.selectChevron{
  color:var(--text-3, var(--muted2));
}
.selectMenuOverlay{
  position:fixed;
  inset:0;
  border:0;
  padding:0;
  background: var(--overlayTransparent, rgba(0,0,0,0));
  -webkit-tap-highlight-color: transparent;
}
.selectMenu{
  position:absolute;
  left:0;
  right:0;
  top:calc(100% + 6px);
  background: linear-gradient(180deg, var(--surface-3, var(--surface-2)), var(--surface-2, var(--surface)));
  border:1px solid var(--border-subtle, var(--menuBorder, var(--border)));
  border-radius:var(--radius-card);
  box-shadow: var(--shadow-sm, var(--menuShadow, var(--shadow-soft)));
  padding:6px;
  display:flex;
  flex-direction:column;
  gap:4px;
  max-height:240px;
  overflow:auto;
}
.selectOption{
  border:0;
  background:transparent;
  color:var(--text-1, var(--text));
  text-align:left;
  padding:8px 10px;
  border-radius:var(--radius-12);
  cursor:pointer;
}
.selectOption:hover{
  background: var(--menuOptionHover, rgba(255,255,255,.06));
}
.selectOption.isSelected{
  background: var(--accent-soft, var(--menuOptionSelected, rgba(124,58,237,.16)));
  box-shadow: inset 0 0 0 1px var(--accentBorder, rgba(124,58,237,.28));
}
.selectOption.isDisabled{
  opacity:.5;
  cursor:not-allowed;
}
.selectEmpty{
  padding:10px;
  color:var(--text-3, var(--muted2));
  font-size:var(--font-sm);
}
.datePickerMenu{
  gap:10px;
  padding:10px;
  max-height:min(70dvh, 420px);
  overflow:hidden;
}
.datePickerHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.datePickerMonth{
  font-size:var(--font-sm);
  font-weight:600;
  color:var(--text-1, var(--text));
  text-transform:capitalize;
}
.datePickerNavBtn{
  border:1px solid var(--border-subtle, var(--border));
  background: var(--surface-2, var(--glass2));
  color:var(--text-1, var(--text));
  border-radius:var(--radius-12);
  width:32px;
  height:32px;
  cursor:pointer;
  display:grid;
  place-items:center;
}
.datePickerNavBtn:hover{
  background: var(--surface-3, var(--glass2));
}
.datePickerWeekdays{
  display:grid;
  grid-template-columns:repeat(7, minmax(0, 1fr));
  gap:4px;
  font-size:var(--font-xs);
  color:var(--text-3, var(--muted2));
  text-align:center;
}
.datePickerWeekday{
  padding:4px 0;
}
.datePickerGrid{
  display:grid;
  grid-template-columns:repeat(7, minmax(0, 1fr));
  gap:4px;
}
.datePickerDay{
  border:0;
  background:transparent;
  color:var(--text-1, var(--text));
  border-radius:var(--radius-12);
  padding:8px 0;
  cursor:pointer;
  font-size:var(--font-sm);
}
.datePickerDay:hover{
  background: var(--menuOptionHover, rgba(255,255,255,.06));
}
.datePickerDay.isOutside{
  color:var(--text-3, var(--muted2));
  opacity:0.6;
}
.datePickerDay.isSelected{
  background: var(--accent-soft, var(--menuOptionSelected, rgba(124,58,237,.16)));
  box-shadow: inset 0 0 0 1px var(--accentBorder, rgba(124,58,237,.28));
}
.datePickerDay.isToday{
  box-shadow: inset 0 0 0 1px var(--accentBorder, rgba(255,255,255,.35));
}
.datePickerFooter{
  display:flex;
  justify-content:space-between;
  gap:8px;
}
.datePickerAction{
  border:1px solid var(--border-subtle, var(--border));
  background: var(--surface-2, var(--glass2));
  color:var(--text-1, var(--text));
  border-radius:var(--radius-12);
  padding:6px 10px;
  cursor:pointer;
  font-size:var(--font-sm);
}
.datePickerAction:hover{
  background: var(--surface-3, var(--glass2));
}
/* --- iOS-style Select bottom sheet (touch devices) --- */
@media (pointer: coarse), (max-width: 520px){
  .selectMenuOverlay{
    background: var(--overlaySheetBackdrop, rgba(0,0,0,.45));
    display:flex;
    align-items:flex-end;
    justify-content:center;
    padding: 0 12px calc(12px + var(--safe-bottom));
  }

  .selectMenu{
    position:relative;
    top:auto;
    left:auto;
    right:auto;
    width: min(560px, 100%);
    max-height: min(70dvh, 520px);
    overflow:auto;
    padding: 10px;
    border-radius: 20px;
    border: 1px solid var(--border-strong);
    background: linear-gradient(180deg, var(--surface-3, var(--surface-2)), var(--surface-2, var(--surface)));
    box-shadow: var(--shadow-sm, var(--shadow-soft));
    animation: none;
  }

  .selectOption{
    padding: 12px 12px;
    font-size: var(--font-lg);
  }

  .selectOption.isSelected{
    background: var(--accent-soft, var(--menuOptionSelectedStrong, rgba(124,58,237,.18)));
    box-shadow: inset 0 0 0 1px var(--accentBorder, var(--menuOptionSelectedBorder, rgba(124,58,237,.28)));
  }
}
.reminderOverlay{
}
.reminderCard{
  max-height:calc(100dvh - var(--safe-top) - var(--safe-bottom) - 24px);
  overflow:auto;
}
.reminderPulse{
  position:relative;
}
.reminderPulse::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:24px;
  border:1px solid var(--pulseBorder, rgba(255,255,255,.25));
  animation: none;
  pointer-events:none;
}
.disciplineOverlay{
}
.disciplineCard{
  width:min(360px, 100%);
  padding:18px;
}
.noteHistoryBackdrop{
  align-items:flex-end;
  padding:0;
}
.noteHistorySheet{
  width:100%;
  max-width:560px;
  margin:0 auto;
  border-top-left-radius:20px;
  border-top-right-radius:20px;
  border-bottom-left-radius:0;
  border-bottom-right-radius:0;
  padding:16px 16px calc(16px + var(--safe-bottom));
  max-height:80dvh;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.noteHistoryBody{
  overflow:auto;
  min-height:0;
  max-height:100%;
}
.drawerBackdrop{
  justify-content:flex-end;
  align-items:stretch;
}
.drawerPanel{
  position:fixed;
  top:70px;
  right:12px;
  bottom:calc(12px + var(--safe-bottom));
  width:min(360px, 92vw);
  background: linear-gradient(180deg, var(--surface-2, var(--glass2)), var(--surface-1, var(--glass)));
  border:1px solid var(--border-subtle, var(--border));
  border-radius:20px;
  padding:16px;
  overflow:auto;
  box-shadow: var(--shadow-lg, var(--drawerShadow, 0 24px 80px rgba(0,0,0,.4)));
  max-height:calc(100dvh - var(--safe-top) - var(--safe-bottom) - 24px);
}
.plusExpander{
  position:fixed;
  z-index:var(--z-dropdown);
  transform: translateY(6px) scale(.98);
  opacity:0;
  pointer-events:none;
  transition: none;
}
.plusExpander.isOpen{
  transform: translateY(0) scale(1.02);
  opacity:1;
  pointer-events:auto;
}
.plusExpanderPanel{
  background: linear-gradient(180deg, var(--surface-2, var(--glass2)), var(--surface-1, var(--glass)));
  border:1px solid var(--border-subtle, var(--border));
  border-radius:16px;
  padding:10px;
  box-shadow: var(--shadow-sm, var(--shadow-soft));
  max-height:calc(100dvh - var(--safe-top) - var(--safe-bottom) - 24px);
  overflow:auto;
}
.drawerHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.editPanel{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.editPanelBody{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:12px;
}
.editSection{
  border:1px solid var(--panelBorder, rgba(255,255,255,.12));
  background: var(--panelBg, rgba(255,255,255,.04));
  border-radius:14px;
  padding:12px;
}
.editSectionTitle{
  font-size:13px;
  font-weight:700;
  margin-bottom:8px;
}
.editSectionToggle{
  width:100%;
  border:0;
  background:transparent;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:13px;
  font-weight:700;
  padding:0;
  cursor:pointer;
}
.editSectionBody{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:10px;
}
.editPanelFooter{
  position:sticky;
  bottom:-1px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding-top:12px;
  margin-top:12px;
  background: var(--panelFooterBg, rgba(5,6,10,.6));
  border-top:1px solid var(--panelFooterBorder, rgba(255,255,255,.12));
}
.editDaysRow{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}
.editDayOption{
  display:flex;
  align-items:center;
  gap:6px;
  border:1px solid var(--border);
  background: var(--editDayOptionBg, rgba(255,255,255,.06));
  border-radius:10px;
  padding:6px 8px;
  font-size:12px;
}
.editDayOption input{
  width:14px;
  height:14px;
  accent-color: var(--accent);
}
.editTimeList{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.editTimeRow{
  display:flex;
  align-items:center;
  gap:8px;
}
.ios .modalBackdrop{
  position:absolute;
}
.ios .drawerPanel{
  position:absolute;
}
